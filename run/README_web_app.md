<!-- @format -->

# 泥石流视频处理系统 - Web 应用使用说明

## 简介

这是一个基于 Vue+FastAPI 的 Web 应用程序，为泥石流视频处理系统提供了一个简单易用的图形界面。通过这个应用，您可以可视化地设置所有必要的参数，并处理视频数据集的创建过程。

## 快速开始

1. 确保您已经安装了所有必要的依赖包：

   ```bash
   pip install -r requirements.txt
   ```

2. 运行 Web 应用：

   ```bash
   python run/run_web_app.py
   ```

3. 应用将自动在默认浏览器中打开。如果没有自动打开，请手动访问：
   - 前端界面：http://localhost:8080
   - 后端 API：http://localhost:8000

## 主要功能

- **视频上传**：直接上传您的视频文件
- **视频选择**：从已有的视频列表中选择
- **参数设置**：可视化设置所有处理参数
- **数据集创建**：一键创建数据集

## 使用流程

1. **上传/选择视频**：

   - 点击"上传视频"按钮上传新视频
   - 或从视频列表中选择已有视频

2. **设置参数**：

   - 基本参数（保存路径、是否为泥石流、数据类型等）
   - 帧处理参数（帧索引、切片窗口大小、提取频率等）
   - SAM 参数（模型类型、运行设备等）

3. **处理视频**：
   - 点击"开始处理"按钮
   - 等待处理完成并查看结果

## 参数说明

### 必填参数

- **保存文件夹**：数据集保存的目标文件夹路径
- **视频文件**：需要处理的视频文件
- **帧索引**：关键帧的索引位置

### 可选参数

- **是否为泥石流**：标记视频是否为泥石流（默认：是）
- **数据类型**：train/val/test（默认：train）
- **切片窗口大小**：窗口切片的大小（默认：75）
- **提取频率**：帧提取的频率（默认：1）
- **兴趣点坐标**：关注点的 X 和 Y 坐标（默认：[800, 700]）
- **SAM 参数**：模型类型、运行设备和模型路径

## 系统要求

- Python 3.8+
- 足够的磁盘空间用于存储视频和处理结果
- 如使用 CUDA 加速，需要兼容的 NVIDIA GPU 和驱动

## 故障排除

如果遇到问题：

1. 确保已安装所有依赖包
2. 检查视频文件格式是否支持（推荐 MP4 格式）
3. 验证 SAM 模型路径是否正确
4. 查看控制台输出的错误信息

## 获取更多信息

有关更详细的信息，请参阅：

- `src/web/README.md` - Web 应用程序详细文档
- `src/make_train_dataset/make_train_dataset.py` - 数据集创建核心代码
